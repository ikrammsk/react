{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASF\\\\Desktop\\\\Konexio\\\\react\\\\chapitre6\\\\moovice\\\\src\\\\components\\\\Popular.js\";\nimport React from 'react';\nimport Card from '';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Popular extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      movies: [],\n      page: 1\n    };\n    this.loadScroll = this.loadScroll.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bf01af8f5d704591a09edcc0c2f5e084\").then(res => res.json()).then(response => {\n      this.setState({\n        movies: response.results\n      });\n    });\n    window.addEventListener('scroll', e => this.loadScroll(e));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', e => this.loadScroll(e));\n  }\n\n  loadScroll(e) {\n    if (e.target.scrollingElement.scrollHeight - e.target.scrollingElement.scrollTop === e.target.scrollingElement.clientHeight) {\n      let currentPage = this.state.page;\n      let newPage = currentPage + 1;\n      fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bf01af8f5d704591a09edcc0c2f5e084\" + \"&page=\" + newPage).then(res => res.json()).then(response => {\n        const allMovies = this.state.movies.concat(response.results);\n        console.log(allMovies);\n        this.setState({\n          movies: allMovies,\n          page: this.state.page + 1\n        });\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onScroll: e => console.log(\"we\"),\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Popular\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.movies.map(elem => {\n          return /*#__PURE__*/_jsxDEV(Card, {\n            image: \"https://image.tmdb.org/t/p/w500\" + elem.poster_path,\n            title: elem.title,\n            year: elem.release_date,\n            description: elem.overview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 32\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Popular;","map":{"version":3,"sources":["C:/Users/ASF/Desktop/Konexio/react/chapitre6/moovice/src/components/Popular.js"],"names":["React","Card","Popular","Component","constructor","state","movies","page","loadScroll","bind","componentDidMount","fetch","then","res","json","response","setState","results","window","addEventListener","e","componentWillUnmount","removeEventListener","target","scrollingElement","scrollHeight","scrollTop","clientHeight","currentPage","newPage","allMovies","concat","console","log","render","map","elem","poster_path","title","release_date","overview"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,EAAjB;;;AAGA,MAAMC,OAAN,SAAsBF,KAAK,CAACG,SAA5B,CAAsC;AAElCC,EAAAA,WAAW,GAAG;AACV;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,MAAM,EAAE,EADC;AAETC,MAAAA,IAAI,EAAE;AAFG,KAAb;AAKA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChBC,IAAAA,KAAK,CAAC,8GAAD,CAAL,CACKC,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUG,QAAQ,IAAI;AACd,WAAKC,QAAL,CAAc;AACVV,QAAAA,MAAM,EAAES,QAAQ,CAACE;AADP,OAAd;AAGH,KANL;AAQAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAmCC,CAAD,IAAO,KAAKZ,UAAL,CAAgBY,CAAhB,CAAzC;AACH;;AAEDC,EAAAA,oBAAoB,GAAG;AACnBH,IAAAA,MAAM,CAACI,mBAAP,CAA2B,QAA3B,EAAqCF,CAAD,IAAO,KAAKZ,UAAL,CAAgBY,CAAhB,CAA3C;AACH;;AAEDZ,EAAAA,UAAU,CAACY,CAAD,EAAI;AACV,QAAKA,CAAC,CAACG,MAAF,CAASC,gBAAT,CAA0BC,YAA1B,GAAyCL,CAAC,CAACG,MAAF,CAASC,gBAAT,CAA0BE,SAApE,KAAmFN,CAAC,CAACG,MAAF,CAASC,gBAAT,CAA0BG,YAAjH,EAA+H;AAE3H,UAAIC,WAAW,GAAG,KAAKvB,KAAL,CAAWE,IAA7B;AACA,UAAIsB,OAAO,GAAGD,WAAW,GAAG,CAA5B;AACAjB,MAAAA,KAAK,CAAC,iHAAiH,QAAjH,GAA4HkB,OAA7H,CAAL,CACKjB,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUG,QAAQ,IAAI;AAEd,cAAMe,SAAS,GAAG,KAAKzB,KAAL,CAAWC,MAAX,CAAkByB,MAAlB,CAAyBhB,QAAQ,CAACE,OAAlC,CAAlB;AAEAe,QAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACA,aAAKd,QAAL,CAAc;AACVV,UAAAA,MAAM,EAAEwB,SADE;AAEVvB,UAAAA,IAAI,EAAE,KAAKF,KAAL,CAAWE,IAAX,GAAkB;AAFd,SAAd;AAIH,OAXL;AAYH;AACJ;;AAID2B,EAAAA,MAAM,GAAG;AAEL,wBACI;AAAK,MAAA,QAAQ,EAAGd,CAAD,IAAOY,OAAO,CAACC,GAAR,CAAY,IAAZ,CAAtB;AAAA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAGI;AAAA,kBACK,KAAK5B,KAAL,CAAWC,MAAX,CAAkB6B,GAAlB,CAAsBC,IAAI,IAAI;AAC3B,8BAAO,QAAC,IAAD;AAAM,YAAA,KAAK,EAAE,oCAAoCA,IAAI,CAACC,WAAtD;AACH,YAAA,KAAK,EAAED,IAAI,CAACE,KADT;AAEH,YAAA,IAAI,EAAEF,IAAI,CAACG,YAFR;AAGH,YAAA,WAAW,EAAEH,IAAI,CAACI;AAHf;AAAA;AAAA;AAAA;AAAA,kBAAP;AAIH,SALA;AADL;AAAA;AAAA;AAAA;AAAA,cAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAcH;;AAnEiC;;AAsEtC,eAAetC,OAAf","sourcesContent":["import React from 'react';\r\nimport Card from '';\r\n\r\n\r\nclass Popular extends React.Component {\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.state = {\r\n            movies: [],\r\n            page: 1\r\n        }\r\n\r\n        this.loadScroll = this.loadScroll.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bf01af8f5d704591a09edcc0c2f5e084\")\r\n            .then(res => res.json())\r\n            .then(response => {\r\n                this.setState({\r\n                    movies: response.results\r\n                })\r\n            })\r\n\r\n        window.addEventListener('scroll', (e) => this.loadScroll(e))\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll',(e) => this.loadScroll(e));\r\n    }\r\n\r\n    loadScroll(e) {\r\n        if ((e.target.scrollingElement.scrollHeight - e.target.scrollingElement.scrollTop) === e.target.scrollingElement.clientHeight) {\r\n\r\n            let currentPage = this.state.page\r\n            let newPage = currentPage + 1\r\n            fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bf01af8f5d704591a09edcc0c2f5e084\" + \"&page=\" + newPage)\r\n                .then(res => res.json())\r\n                .then(response => {\r\n\r\n                    const allMovies = this.state.movies.concat(response.results)\r\n\r\n                    console.log(allMovies);\r\n                    this.setState({\r\n                        movies: allMovies,\r\n                        page: this.state.page + 1\r\n                    })\r\n                })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div onScroll={(e) => console.log(\"we\")}>\r\n                <h1>Popular</h1>\r\n\r\n                <div>\r\n                    {this.state.movies.map(elem => {\r\n                        return <Card image={\"https://image.tmdb.org/t/p/w500\" + elem.poster_path}\r\n                            title={elem.title}\r\n                            year={elem.release_date}\r\n                            description={elem.overview} />\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Popular;"]},"metadata":{},"sourceType":"module"}