{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASF\\\\Desktop\\\\Konexio\\\\react\\\\chapitre6\\\\moovice\\\\src\\\\components\\\\PopularBtt.js\";\nimport React from 'react';\nimport Card from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PopularBtt extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      movies: [],\n      currentBattle: 0\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bf01af8f5d704591a09edcc0c2f5e084\").then(res => res.json()).then(response => {\n      this.setState({\n        movies: response.results\n      });\n      console.log('wewe');\n    });\n  }\n\n  choose(indexOfMovie) {\n    const newFavorite = JSON.parse(localStorage.getItem(\"favorites\")) || [];\n    newFavorite.push(this.state.movies[indexOfMovie].id);\n    localStorage.setItem(\"favorites\", JSON.stringify(newFavorite));\n    this.setState({\n      currentBattle: this.state.currentBattle + 2\n    });\n    console.log(localStorage.getItem(\"favorites\"));\n  }\n\n  render() {\n    if (this.state.movies.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this);\n    } else if (this.state.currentBattle >= this.state.movies.length) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Vous avez parcouru tous les films !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.choose(this.state.currentBattle),\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            image: \"https://image.tmdb.org/t/p/w500\" + this.state.movies[this.state.currentBattle].poster_path,\n            title: this.state.movies[this.state.currentBattle].title,\n            year: this.state.movies[this.state.currentBattle].release_date,\n            description: this.state.movies[this.state.currentBattle].overview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.choose(this.state.currentBattle + 1),\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            image: \"https://image.tmdb.org/t/p/w500\" + this.state.movies[this.state.currentBattle + 1].poster_path,\n            title: this.state.movies[this.state.currentBattle + 1].title,\n            year: this.state.movies[this.state.currentBattle + 1].release_date,\n            description: this.state.movies[this.state.currentBattle + 1].overview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n}\n\nexport default PopularBtt;","map":{"version":3,"sources":["C:/Users/ASF/Desktop/Konexio/react/chapitre6/moovice/src/components/PopularBtt.js"],"names":["React","Card","PopularBtt","Component","constructor","state","movies","currentBattle","componentDidMount","fetch","then","res","json","response","setState","results","console","log","choose","indexOfMovie","newFavorite","JSON","parse","localStorage","getItem","push","id","setItem","stringify","render","length","poster_path","title","release_date","overview"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Card from './Card';\r\n\r\n\r\nclass PopularBtt extends React.Component {\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.state = {\r\n            movies: [],\r\n            currentBattle: 0\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(\"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=bf01af8f5d704591a09edcc0c2f5e084\")\r\n            .then(res => res.json())\r\n            .then(response => {\r\n                this.setState({\r\n                    movies: response.results\r\n                })\r\n                console.log('wewe')\r\n            })\r\n    }\r\n\r\n\r\n    choose(indexOfMovie) {\r\n\r\n        const newFavorite = JSON.parse(localStorage.getItem(\"favorites\")) || [];\r\n        newFavorite.push(this.state.movies[indexOfMovie].id);\r\n\r\n        localStorage.setItem(\"favorites\", JSON.stringify(newFavorite));\r\n\r\n        this.setState({\r\n            currentBattle: this.state.currentBattle + 2\r\n        })\r\n\r\n        console.log(localStorage.getItem(\"favorites\"))\r\n    }\r\n\r\n    render() {\r\n        if (this.state.movies.length === 0) {\r\n            return (\r\n                <div>\r\n\r\n                </div>\r\n            )\r\n        } else if (this.state.currentBattle >= this.state.movies.length) {\r\n            return (\r\n                <div>\r\n                    <h1>Vous avez parcouru tous les films !</h1>\r\n                </div>\r\n            )\r\n        } else {\r\n\r\n            return (\r\n                <div>\r\n\r\n                    <button onClick={() => this.choose(this.state.currentBattle)}>\r\n                        <Card image={\"https://image.tmdb.org/t/p/w500\" + this.state.movies[this.state.currentBattle].poster_path}\r\n                            title={this.state.movies[this.state.currentBattle].title}\r\n                            year={this.state.movies[this.state.currentBattle].release_date}\r\n                            description={this.state.movies[this.state.currentBattle].overview} />\r\n                    </button>\r\n\r\n                    <button onClick={() => this.choose(this.state.currentBattle + 1)}>\r\n                        <Card image={\"https://image.tmdb.org/t/p/w500\" + this.state.movies[this.state.currentBattle + 1].poster_path}\r\n                            title={this.state.movies[this.state.currentBattle + 1].title}\r\n                            year={this.state.movies[this.state.currentBattle + 1].release_date}\r\n                            description={this.state.movies[this.state.currentBattle + 1].overview} />\r\n                    </button>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default PopularBtt;"]},"metadata":{},"sourceType":"module"}